(this.webpackJsonppart2_phonebook=this.webpackJsonppart2_phonebook||[]).push([[0],{20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t.n(o),i=t(14),s=t.n(i),l=(t(20),t(3)),a=function(e){var n=e.newSearch,t=e.persons.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.number]},e.name)})).filter((function(e){return-1!==e.key.toLowerCase().indexOf(n.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Search Match Entries"}),Object(c.jsx)("ol",{children:t})]})},u=t(4),j=t.n(u),d="/api/persons",b={getAll:function(){var e=j.a.get(d);return console.log("hereheretest"),e.then((function(e){return e.data}))},create:function(e){return j.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){var t=j.a.put("".concat(d,"/").concat(e),n);return console.log(t),console.log("test"),t.then((function(e){return e.data})).catch("did not work")},remove:function(e){var n=j.a.delete("".concat(d,"/").concat(e));return console.log("".concat(d,"/").concat(e)),n.then((function(e){return e.data}))}};console.log(b),console.log("test");var h=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:16,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},className:"error",children:n})},O=function(e){return null===e.message?null:Object(c.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:16,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},className:"success",children:"Entry Received"})},g=function(e){var n=e.newName,t=e.newNumber,r=e.handleNameChange,i=e.handleNumberChange,s=e.newSearch,u=Object(o.useState)([]),j=Object(l.a)(u,2),d=j[0],g=j[1],f=Object(o.useState)(null),m=Object(l.a)(f,2),x=m[0],v=m[1],p=Object(o.useState)(null),S=Object(l.a)(p,2),w=S[0],y=S[1];Object(o.useEffect)((function(){b.getAll().then((function(e){g(e)}))}),[]);var C=function(e){e.preventDefault(),b.getAll().then((function(e){g(e)}));var c=d.map((function(e){return e.name})),o={name:n,number:t};if(console.log("listkeys:"),console.log(c),console.log("phoneObject:"),console.log(o),-1===c.indexOf(n))b.create(o).then((function(e){g(d.concat(e)),v(!0),setTimeout((function(){v(null)}),3e3)})).catch((function(e){console.log(e.response.data),y(String(e.response.data.error)),setTimeout((function(){y(null)}),5e3)}));else if(!0===window.confirm("proceed to change ".concat(n,"s number?"))){var r=d.filter((function(e){return n===e.name}))[0].id;console.log(r),b.update(r,o).then((function(e){console.log("then"),console.log(d,"test"),g(d.concat(e)),console.log(d),v(!0),setTimeout((function(){v(null)}),3e3)})).catch((function(e){y(!0),console.log(e),setTimeout((function(){y(null)}),5e3)}))}},k=function(e){console.log(e.target.id),console.log(d),!0===window.confirm("do you want to delete entry")&&(b.remove(e.target.id),setTimeout((function(){b.getAll().then((function(e){g(e)}))}),500))},N=function(){return console.log(d),d.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.number,Object(c.jsx)("button",{id:e.id,onClick:k,children:"delete"})]},e.name)}))};return null!==w?Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:C,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:r}),"number:  ",Object(c.jsx)("input",{value:t,onChange:i})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{type:"submit",children:"add"}),Object(c.jsx)(h,{message:w})]}),Object(c.jsx)("div",{children:Object(c.jsx)(a,{newSearch:s,persons:d})})]}),Object(c.jsx)("ol",{children:N()})]}):null===x?Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:C,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:r}),"number:  ",Object(c.jsx)("input",{value:t,onChange:i})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})}),Object(c.jsx)("div",{children:Object(c.jsx)(a,{newSearch:s,persons:d})})]}),Object(c.jsx)("h2",{children:"All Entries"}),Object(c.jsx)("ol",{children:N()})]}):!0===x?Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:C,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:r}),"number:  ",Object(c.jsx)("input",{value:t,onChange:i})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{type:"submit",children:"add"}),Object(c.jsx)(O,{message:{entryState:x}})]}),Object(c.jsx)("div",{children:Object(c.jsx)(a,{newSearch:s,persons:d})})]}),Object(c.jsx)("ol",{children:N()})]}):void 0},f=function(){var e=Object(o.useState)(""),n=Object(l.a)(e,2),t=n[0],r=n[1],i=Object(o.useState)(""),s=Object(l.a)(i,2),a=s[0],u=s[1],j=Object(o.useState)(""),d=Object(l.a)(j,2),b=d[0],h=d[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsxs)("div",{children:["search: ",Object(c.jsx)("input",{value:b,onChange:function(e){h(e.target.value)}})]}),Object(c.jsx)("h2",{children:"Add Entry"}),Object(c.jsx)("div",{children:Object(c.jsx)(g,{newName:t,newNumber:a,handleNameChange:function(e){r(e.target.value)},handleNumberChange:function(e){u(e.target.value)},newSearch:b})})]})},m=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),c(e),o(e),r(e),i(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(f,{})}),document.getElementById("root")),m()}},[[39,1,2]]]);
//# sourceMappingURL=main.e94b02de.chunk.js.map